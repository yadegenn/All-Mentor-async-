2025-01-10 20:53:28,980 Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-01-10 20:53:28,981 Added job "checker" to job store "default"
2025-01-10 20:53:28,981 Scheduler started
2025-01-10 20:53:28,984 Looking for jobs to run
2025-01-10 20:53:28,984 Next wakeup is due at 2025-01-10 20:53:33.980822+05:00 (in 4.996287 seconds)
2025-01-10 20:53:33,093 executing <function connect.<locals>.connector at 0x7fc420905d00>
2025-01-10 20:53:33,097 operation <function connect.<locals>.connector at 0x7fc420905d00> completed
2025-01-10 20:53:33,098 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, 'PRAGMA foreign_keys = ON', [])
2025-01-10 20:53:33,099 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, 'PRAGMA foreign_keys = ON', []) completed
2025-01-10 20:53:33,100 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS users (\n                chat_id INTEGER,\n                topic_id INTEGER,\n                user_name TEXT,\n                PRIMARY KEY (chat_id, topic_id)\n            )\n        ', [])
2025-01-10 20:53:33,101 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS users (\n                chat_id INTEGER,\n                topic_id INTEGER,\n                user_name TEXT,\n                PRIMARY KEY (chat_id, topic_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,101 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS group_messages (\n                topic_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (topic_id, local_id)\n            )\n        ', [])
2025-01-10 20:53:33,101 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS group_messages (\n                topic_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (topic_id, local_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,101 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS private_messages (\n                chat_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (chat_id, local_id)\n            )\n        ', [])
2025-01-10 20:53:33,101 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS private_messages (\n                chat_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (chat_id, local_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,102 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS message_reactions (\n                chat_id INTEGER,\n                message_id INTEGER,\n                user_id INTEGER,\n                reaction TEXT,\n                PRIMARY KEY (chat_id, message_id, user_id)\n            )\n        ', [])
2025-01-10 20:53:33,102 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, '\n            CREATE TABLE IF NOT EXISTS message_reactions (\n                chat_id INTEGER,\n                message_id INTEGER,\n                user_id INTEGER,\n                reaction TEXT,\n                PRIMARY KEY (chat_id, message_id, user_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,102 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7fc420ae1f30>)
2025-01-10 20:53:33,102 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7fc420ae1f30>) completed
2025-01-10 20:53:33,102 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, 'SELECT topic_id FROM users WHERE chat_id = ?', (5434361630,))
2025-01-10 20:53:33,102 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae1f30>, 'SELECT topic_id FROM users WHERE chat_id = ?', (5434361630,)) completed
2025-01-10 20:53:33,103 executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a55c0>)
2025-01-10 20:53:33,103 operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a55c0>) completed
2025-01-10 20:53:33,103 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a55c0>)
2025-01-10 20:53:33,103 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a55c0>) completed
2025-01-10 20:53:33,103 executing <function connect.<locals>.connector at 0x7fc4209049a0>
2025-01-10 20:53:33,104 operation <function connect.<locals>.connector at 0x7fc4209049a0> completed
2025-01-10 20:53:33,104 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'PRAGMA foreign_keys = ON', [])
2025-01-10 20:53:33,104 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'PRAGMA foreign_keys = ON', []) completed
2025-01-10 20:53:33,104 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n            CREATE TABLE IF NOT EXISTS users (\n                chat_id INTEGER,\n                topic_id INTEGER,\n                user_name TEXT,\n                PRIMARY KEY (chat_id, topic_id)\n            )\n        ', [])
2025-01-10 20:53:33,104 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n            CREATE TABLE IF NOT EXISTS users (\n                chat_id INTEGER,\n                topic_id INTEGER,\n                user_name TEXT,\n                PRIMARY KEY (chat_id, topic_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,105 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n            CREATE TABLE IF NOT EXISTS group_messages (\n                topic_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (topic_id, local_id)\n            )\n        ', [])
2025-01-10 20:53:33,105 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n            CREATE TABLE IF NOT EXISTS group_messages (\n                topic_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (topic_id, local_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,105 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n            CREATE TABLE IF NOT EXISTS private_messages (\n                chat_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (chat_id, local_id)\n            )\n        ', [])
2025-01-10 20:53:33,105 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n            CREATE TABLE IF NOT EXISTS private_messages (\n                chat_id INTEGER,\n                message_id INTEGER,\n                local_id INTEGER,\n                PRIMARY KEY (chat_id, local_id)\n            )\n        ', []) completed
2025-01-10 20:53:33,105 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7fc420ae2200>)
2025-01-10 20:53:33,105 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7fc420ae2200>) completed
2025-01-10 20:53:33,106 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT topic_id FROM users WHERE chat_id = ? AND user_name = ?', (5434361630, 'yadgenn'))
2025-01-10 20:53:33,106 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT topic_id FROM users WHERE chat_id = ? AND user_name = ?', (5434361630, 'yadgenn')) completed
2025-01-10 20:53:33,106 executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a50c0>)
2025-01-10 20:53:33,106 operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a50c0>) completed
2025-01-10 20:53:33,106 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a50c0>)
2025-01-10 20:53:33,106 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a50c0>) completed
2025-01-10 20:53:33,502 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT topic_id FROM users WHERE chat_id = ?', (5434361630,))
2025-01-10 20:53:33,502 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT topic_id FROM users WHERE chat_id = ?', (5434361630,)) completed
2025-01-10 20:53:33,502 executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a50c0>)
2025-01-10 20:53:33,502 operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a50c0>) completed
2025-01-10 20:53:33,503 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a50c0>)
2025-01-10 20:53:33,503 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a50c0>) completed
2025-01-10 20:53:33,503 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT MAX(local_id) FROM group_messages WHERE topic_id = ?', (1488,))
2025-01-10 20:53:33,503 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT MAX(local_id) FROM group_messages WHERE topic_id = ?', (1488,)) completed
2025-01-10 20:53:33,503 executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a50c0>)
2025-01-10 20:53:33,503 operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc4208a50c0>) completed
2025-01-10 20:53:33,504 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a50c0>)
2025-01-10 20:53:33,504 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc4208a50c0>) completed
2025-01-10 20:53:33,504 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n                    INSERT INTO group_messages (topic_id, message_id, local_id)\n                    VALUES (?, ?, ?)\n                ', (1488, 1514, 15))
2025-01-10 20:53:33,505 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n                    INSERT INTO group_messages (topic_id, message_id, local_id)\n                    VALUES (?, ?, ?)\n                ', (1488, 1514, 15)) completed
2025-01-10 20:53:33,505 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT MAX(local_id) FROM private_messages WHERE chat_id = ?', (5434361630,))
2025-01-10 20:53:33,505 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, 'SELECT MAX(local_id) FROM private_messages WHERE chat_id = ?', (5434361630,)) completed
2025-01-10 20:53:33,506 executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc42089b5c0>)
2025-01-10 20:53:33,506 operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x7fc42089b5c0>) completed
2025-01-10 20:53:33,506 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc42089b5c0>)
2025-01-10 20:53:33,506 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7fc42089b5c0>) completed
2025-01-10 20:53:33,506 executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n                    INSERT INTO private_messages (chat_id, message_id, local_id)\n                    VALUES (?, ?, ?)\n                ', (5434361630, 23418, 15))
2025-01-10 20:53:33,506 operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x7fc420ae2200>, '\n                    INSERT INTO private_messages (chat_id, message_id, local_id)\n                    VALUES (?, ?, ?)\n                ', (5434361630, 23418, 15)) completed
2025-01-10 20:53:33,506 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7fc420ae2200>)
2025-01-10 20:53:33,510 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7fc420ae2200>) completed
2025-01-10 20:53:33,981 Looking for jobs to run
2025-01-10 20:53:33,982 Next wakeup is due at 2025-01-10 20:53:38.980822+05:00 (in 4.998520 seconds)
2025-01-10 20:53:33,982 Running job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:38 +05)" (scheduled at 2025-01-10 20:53:33.980822+05:00)
2025-01-10 20:53:33,982 Job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:38 +05)" executed successfully
2025-01-10 20:53:37,988 Task exception was never retrieved
future: <Task finished name='Task-15' coro=<AsyncTeleBot.process_new_updates() done, defined at /home/emilgoo/.var/app/com.jetbrains.PyCharm-Community/data/python/lib/python3.11/site-packages/telebot/async_telebot.py:603> exception=AttributeError("'MessageReactionUpdated' object has no attribute 'message_thread_id'")>
Traceback (most recent call last):
  File "/home/emilgoo/.var/app/com.jetbrains.PyCharm-Community/data/python/lib/python3.11/site-packages/telebot/async_telebot.py", line 745, in process_new_updates
    await self.process_new_message_reaction(new_message_reactions)
  File "/home/emilgoo/.var/app/com.jetbrains.PyCharm-Community/data/python/lib/python3.11/site-packages/telebot/async_telebot.py", line 790, in process_new_message_reaction
    await self._process_updates(self.message_reaction_handlers, message_reaction, 'message_reaction')
  File "/home/emilgoo/.var/app/com.jetbrains.PyCharm-Community/data/python/lib/python3.11/site-packages/telebot/async_telebot.py", line 523, in _process_updates
    await asyncio.gather(*tasks)
  File "/home/emilgoo/.var/app/com.jetbrains.PyCharm-Community/data/python/lib/python3.11/site-packages/telebot/async_telebot.py", line 549, in _run_middlewares_and_handlers
    middleware_result = await middleware.pre_process(message, data)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/emilgoo/Проекты/All Mentor (async)/middlewares/timeout.py", line 69, in pre_process
    await self.process_message_reaction(update)
  File "/home/emilgoo/Проекты/All Mentor (async)/middlewares/timeout.py", line 89, in process_message_reaction
    print(reaction.message_thread_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MessageReactionUpdated' object has no attribute 'message_thread_id'
2025-01-10 20:53:38,982 Looking for jobs to run
2025-01-10 20:53:38,982 Next wakeup is due at 2025-01-10 20:53:43.980822+05:00 (in 4.998294 seconds)
2025-01-10 20:53:38,982 Running job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:43 +05)" (scheduled at 2025-01-10 20:53:38.980822+05:00)
2025-01-10 20:53:38,982 Job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:43 +05)" executed successfully
2025-01-10 20:53:43,983 Looking for jobs to run
2025-01-10 20:53:43,983 Next wakeup is due at 2025-01-10 20:53:48.980822+05:00 (in 4.997273 seconds)
2025-01-10 20:53:43,983 Running job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:48 +05)" (scheduled at 2025-01-10 20:53:43.980822+05:00)
2025-01-10 20:53:44,271 Job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:48 +05)" executed successfully
2025-01-10 20:53:48,983 Looking for jobs to run
2025-01-10 20:53:48,983 Next wakeup is due at 2025-01-10 20:53:53.980822+05:00 (in 4.997322 seconds)
2025-01-10 20:53:48,983 Running job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:53 +05)" (scheduled at 2025-01-10 20:53:48.980822+05:00)
2025-01-10 20:53:48,983 Job "checker (trigger: interval[0:00:05], next run at: 2025-01-10 20:53:53 +05)" executed successfully
2025-01-10 20:53:50,038 Infinity polling: polling exited
2025-01-10 20:53:50,038 Break infinity polling
